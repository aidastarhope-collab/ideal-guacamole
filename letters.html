<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>ðŸ’Œ letters</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#645454; --paper:#fff; --text:#374151;
    --wrap:#f5edd1; --flap:#ecdeb8; --body:#e6cfa7;
    --accent:#f59e0b; --btn:#fbbf24; --btn-hover:#fcd34d;
    --seal:#541717;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}
  header{max-width:1100px;margin:24px auto 8px;padding:0 16px}
  h1{margin:0 0 10px}
  .meta{opacity:.9;margin:0 0 10px}
  .actions{display:flex;gap:8px;flex-wrap:wrap}
  .btn{padding:10px 14px;border:0;border-radius:10px;font-weight:700;cursor:pointer}
  .btn.primary{background:#000000;color:#fff}
  .btn.primary:hover{background:#000000}
  .btn.light{background:#f3f4f6;color:#111}

  /* Grid */
  .grid{
    max-width:1100px; margin:18px auto 48px; padding:0 16px;
    display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
    gap:20px;
  }

  /* Karte */
  .card{
    background:var(--wrap);
    border:2px solid var(--accent);
    border-radius:14px;
    padding:16px;
    color:#111;
    display:flex; 
    flex-direction:column;
    gap:16px;
    transition:opacity .2s ease;
    min-height:280px;
  }
  .card.locked{opacity:.4; filter:grayscale(50%)}

  /* Umschlag Container */
  .envelope{
    position:relative;
    width: 100%;
    height:180px;
    background:var(--body);
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 4px 8px rgba(0,0,0,.15);
  }

  /* Brief-Inhalt - versteckt bis geÃ¶ffnet */
  .letter{
    position:absolute;
    top:15px; left:15px; right:15px; bottom:15px;
    background:var(--paper);
    color:var(--text);
    border-radius:6px;
    padding:16px;
    box-shadow:0 2px 8px rgba(0,0,0,.1);
    z-index:1;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    opacity:0;
    transform:scale(0.8);
    transition:all 0.5s ease;
  }
  .letter p{
    margin:0;
    font-size:14px;
    line-height:1.5;
  }

  /* Umschlag-KÃ¶rper */
  .envelope-body{
    position:absolute;
    top:80px; left:0; right:0; bottom:0;
    background:var(--body);
    border-radius:0 0 10px 10px;
    z-index:2;
    transition:transform 0.6s ease;
  }

  /* Umschlag-Klappe mit Siegel */
  .envelope-flap{
    position:absolute;
    top:0; left:0; right:0;
    height:100px;
    background:var(--flap);
    clip-path:polygon(0% 0%, 100% 0%, 50% 80%);
    z-index:3;
    transition:transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    transform-origin:top center;
  }

  /* Herz-Siegel auf der Klappe */
  .seal{
    position:absolute;
    top:65px;
    left:50%;
    width:22px;
    height:22px;
    background:var(--seal);
    transform:translate(-50%, -50%) rotate(45deg);
    border-radius:3px 0;
    box-shadow:0 3px 8px rgba(251, 24, 227, 0.6);
  }
  .seal::before,
  .seal::after {
    content:'';
    position:absolute;
    width:22px;
    height:22px;
    background:var(--seal);
    border-radius:50%;
  }
  .seal::before { top:-11px; left:0; }
  .seal::after { top:0; left:-11px; }

  /* GeÃ¶ffneter Zustand */
  .card.opened .envelope-flap{
    transform:rotateX(-180deg);
  }
  .card.opened .envelope-body{
    transform:translateY(100%);
  }
  .card.opened .letter{
    opacity:1;
    transform:scale(1);
    transition-delay:0.4s;
  }

  /* Footer */
  .card-footer{
    display:flex; 
    gap:12px; 
    align-items:center; 
    justify-content:space-between;
  }
  .card-title{
    margin:0; 
    font-size:16px; 
    font-weight:800; 
    color:#111;
    display:flex; 
    align-items:center; 
    gap:8px;
  }
  .badge{
    font-size:11px; 
    font-weight:700; 
    color:#111;
    background:#fde68a; 
    border:1px dashed var(--accent);
    padding:3px 8px; 
    border-radius:12px;
  }
  .toggle-btn{
    padding:8px 12px;
    border:0; 
    border-radius:8px; 
    font-weight:700; 
    cursor:pointer;
    background:var(--btn);
    font-size:13px;
    transition:all .2s ease;
  }
  .toggle-btn:hover:not(:disabled){
    background:var(--btn-hover);
    transform:translateY(-1px);
  }
  .toggle-btn:disabled{opacity:0.5; cursor:not-allowed; background:#999;}

  @media (max-width: 768px) {
    .grid{
      grid-template-columns:1fr;
    }
  }
</style>
</head>
<body>

<header>
  <h1>ðŸ“œ letters</h1>
  <div class="meta" id="meta">â€“</div>
  <div class="actions">
    <a href="game.html" class="btn primary">back</a>
    <button id="reset" class="btn light">reset score</button>
  </div>
</header>

<section class="grid" id="grid"></section>

<script>
(() => {
  // Brief-Inhalte - hier kannst du weitere Briefe hinzufÃ¼gen!
  const MESSAGES = [
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "Test Versuch",
    "letzter Test"
  ];

  // Score aus Session Storage
  const unlockedCount = parseInt(sessionStorage.getItem('heartScore') || '0', 10);
  
  const grid = document.getElementById('grid');
  const meta = document.getElementById('meta');
  
  meta.textContent = `Freigeschaltet: ${Math.min(unlockedCount, MESSAGES.length)} / ${MESSAGES.length} (Score: ${unlockedCount})`;

  // Briefe erstellen
  MESSAGES.forEach((message, index) => {
    const isUnlocked = index < unlockedCount;
    
    // Hauptkarte
    const card = document.createElement('div');
    card.className = 'card' + (isUnlocked ? '' : ' locked');
    
    // Umschlag-Container
    const envelope = document.createElement('div');
    envelope.className = 'envelope';
    
    // Brief-Inhalt
    const letter = document.createElement('div');
    letter.className = 'letter';
    const letterText = document.createElement('p');
    letterText.textContent = message;
    letter.appendChild(letterText);
    
    // Umschlag-KÃ¶rper
    const envelopeBody = document.createElement('div');
    envelopeBody.className = 'envelope-body';
    
    // Umschlag-Klappe
    const envelopeFlap = document.createElement('div');
    envelopeFlap.className = 'envelope-flap';
    
    // Siegel auf der Klappe
    const seal = document.createElement('div');
    seal.className = 'seal';
    envelopeFlap.appendChild(seal);
    
    // Zusammenbauen
    envelope.appendChild(letter);
    envelope.appendChild(envelopeBody);
    envelope.appendChild(envelopeFlap);
    
    // Footer mit Button
    const footer = document.createElement('div');
    footer.className = 'card-footer';
    
    const title = document.createElement('h3');
    title.className = 'card-title';
    title.innerHTML = `letter ${index + 1} <span class="badge">${isUnlocked ? 'unlocked' : 'locked'}</span>`;
    
    const button = document.createElement('button');
    button.className = 'toggle-btn';
    button.textContent = isUnlocked ? 'open' : 'locked';
    
    if (!isUnlocked) {
      button.disabled = true;
    } else {
      // Event fÃ¼r Ã–ffnen/SchlieÃŸen
      let isOpen = false;
      button.addEventListener('click', () => {
        isOpen = !isOpen;
        if (isOpen) {
          card.classList.add('opened');
          button.textContent = 'close';
        } else {
          card.classList.remove('opened');
          button.textContent = 'open';
        }
      });
    }
    
    footer.appendChild(title);
    footer.appendChild(button);
    
    card.appendChild(envelope);
    card.appendChild(footer);
    grid.appendChild(card);
  });

  // Reset Button
  document.getElementById('reset').addEventListener('click', () => {
    if (confirm('reset score?')) {
      sessionStorage.removeItem('heartScore');
      location.reload();
    }
  });
})();
</script>
</body>
</html>
